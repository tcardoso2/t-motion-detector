<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [Environment](#environment)
    -   [motionDetectors](#motiondetectors)
-   [MotionDetector](#motiondetector)
-   [SystemEnvironment](#systemenvironment)
-   [BaseFilter](#basefilter)
-   [\_InternalAddFilter](#_internaladdfilter)
-   [\_InternalAddEnvironment](#_internaladdenvironment)
-   [AddNotifier](#addnotifier)
-   [AddDetector](#adddetector)
-   [DeactivateDetector](#deactivatedetector)
-   [ActivateDetector](#activatedetector)
-   [RemoveNotifier](#removenotifier)
-   [RemoveDetector](#removedetector)
-   [GetEnvironment](#getenvironment)
-   [GetNotifiers](#getnotifiers)
-   [GetMotionDetectors](#getmotiondetectors)
-   [GetMotionDetector](#getmotiondetector)
-   [GetFilters](#getfilters)
-   [Reset](#reset)
-   [Start](#start)
-   [\_StartPlugins](#_startplugins)
-   [StartWithConfig](#startwithconfig)
-   [\_AddInstance](#_addinstance)
-   [Config](#config)
    -   [mapToFile](#maptofile)
    -   [isFallback](#isfallback)
    -   [profile](#profile)
    -   [getProperty](#getproperty)
    -   [slackHook](#slackhook)
    -   [slackAuth](#slackauth)
    -   [raspistillOptions](#raspistilloptions)
    -   [toString](#tostring)
-   [SaveAllToConfig](#savealltoconfig)
-   [\_InternalSerializeCurrentContext](#_internalserializecurrentcontext)
-   [AddPlugin](#addplugin)
-   [RemovePlugin](#removeplugin)
-   [GetPlugins](#getplugins)
-   [Entities](#entities)
-   [Extensions](#extensions)
-   [Filters](#filters)

## Environment

**Parameters**

-   `params`  

### motionDetectors

: Contains the motion detectors attached to the current environment.

## MotionDetector

: Test

**Parameters**

-   `name`  

## SystemEnvironment

**Extends ent.Environment**

A Simple Command line wrapper, it executes the command mentioned after a change in the Environment
and propagates the stdout result to the notifier. It uses node-cmd under the hood. Also provides
System additional info such as memory used, free memory and cpu usage

**Parameters**

-   `command` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** is a command to execute
-   `interval`   (optional, default `0`)
-   `killAfter`   (optional, default `0`)
-   `an` **int** interval in milliseconds to execute the commands, if = 0 only executes once, by default is 0
-   `an` **int** killAfter will clear the interval and stop the command after specified number of times.

## BaseFilter

**Parameters**

-   `val`  
-   `applyTo`  

## \_InternalAddFilter

Adds a Filter into the current Detectors in {motionDetectors}. If the filter is not of BaseFilter instance,
it fails silently (logs a warning message into the logger) and returns false. If there are no Detectors still
returns true.

**Parameters**

-   `filter` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** object to add. This function is internal (optional, default `new filters.BaseFilter()`)

Returns **[Boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** true if the filters were binded to the existing detectors.

## \_InternalAddEnvironment

Adds an Environment into the current context. The environment needs to be if instance Environment, if not
if fails silently, logs the error in the logger and returns false.

**Parameters**

-   `env` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** is the Environment object to add. This function is internal (optional, default `new ent.Environment()`)

Returns **[Boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** true if the environment is successfully created.

## AddNotifier

Adds a Notifier to the current environment (binds to existing Detectors in {motionDetectors} variable).
Checks that the notifier is of {BaseNotifier} instance. Allows to force adding a notifier event if not
of the correct type, by setting force = true

**Parameters**

-   `notifier` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** is the Notifier object to add.
-   `template` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** is the template message for the notifier, in case it triggers.
-   `force` **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** can be set to true to push the notifier even if not of {BaseNotifier} instance (optional, default `false`)

Returns **[Boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** true if the notifier is successfully created.

## AddDetector

Adds a detector or detectors (in form of array) to the {Environment} in the {motionDetectors} 
internal variable.
Checks that the notifier is of {BaseNotifier} instance. Allows to force adding a notifier event if not
of the correct type, by setting force = true.
Fails silently (returns false) if the detector is not of {MotionDetector} type, and logs the occurence.
Fails hard (throws an Error) if there is no existing {Environment} set in the context at the runtime.

**Parameters**

-   `detector` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** is the MotionDetector object to add.
-   `force` **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** can be set to true to push the detector even if not of {MotionDetector} instance (optional, default `false`)

Returns **[Boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** true if the detector is successfully created.

## DeactivateDetector

Deactivates an existing detector by name.
Fails hard (throws an Error) if a {MotionDetector} with that name is not found at the runtime.

**Parameters**

-   `name` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** is the name of the {MotionDetector} to deactivate.

## ActivateDetector

Activates an existing detector by name.
Fails hard (throws an Error) if a {MotionDetector} with that name is not found at the runtime.

**Parameters**

-   `name` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** is the name of the {MotionDetector} to deactivate.

## RemoveNotifier

Removes an existing notifier from the context.
Does not fail if the notifier is not found.

**Parameters**

-   `notifier` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** is the notifier instance to remove.
-   `silent`   (optional, default `false`)
-   `sileng` **booleal** states if = true the removal should not send a notification

Returns **any** true if the notifier was found (and subsequently removed).

## RemoveDetector

Removes an existing MotionDetector from the context, including its event listeners.
Does not fail if the detector is not found.

**Parameters**

-   `detector` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** is the MotionDetector instance to remove.

Returns **any** true if the detector was found (and subsequently removed).

## GetEnvironment

Gets the object which represents the current Environment of the context.
throws an Error if an environment does not exist in the context.

Returns **any** a Environment object.

## GetNotifiers

Gets the notifiers array present in the context.

Returns **any** an Array of Notifier objects.

## GetMotionDetectors

Gets the Motion Detectors array present in the context.

Returns **any** an Array of MotionDetector objects.

## GetMotionDetector

Gets the Motion Detectors with the given name.
Will throw an exception if there is no Motion detector with such name.

**Parameters**

-   `name` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** is the name of the MotionDetector instance to get.

Returns **any** a MotionDetector objects.

## GetFilters

Gets all the existing Filters present in the current context.

Returns **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** an Array of Filter objects.

## Reset

Resets the current context environment, notifiers and motion detectors.

## Start

Starts the current environment given a set of parameters (Old way of starting - it is preferrable)
to use {StartWithConfig} instead.

**Parameters**

-   `params` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** is a parameters object, any object which contains the following attributes: \\n
    (1) an "environment" attribute with the {Environment} object to set; \\n
    (2) an "initialMotionDetector" attribute with one {MotionDetector} object to set (does not allow several motion detectors); \\n
    (3) an "initialNotifier" attribute with the {Notifier} object to set (does not allow several notifiers); \\n
-   `silent` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** if set to true will not send an initial notification to notifiers when starting up (by default is set to false). (optional, default `false`)

## \_StartPlugins

Internal function which Starts all the Plugins, ran when StartWithConfir is called.
Throws an Error if any of the plugins does not implement the "Start" method.

**Parameters**

-   `e`  
-   `m`  
-   `n`  
-   `f`  
-   `The` **e** current Environment.
-   `The` **m** current MotionDetectors.
-   `The` **n** current Notifiers.
-   `The` **f** current Filters.

## StartWithConfig

Starts the current environment based on existing configuration. Use this method instead of {Start}

**Parameters**

-   `configParams` **[Config](#config)** a parameter object of the {Config} instance.
-   `callback` **[Function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function)** is a function which will be called after all initialization is done.\\n
    args passed to that callback function, are: Environment, MotionDetectors, Notifiers and Filters objects.
    The correct way of initializing the program is by puting the main code inside that callback.

**Examples**

```javascript
let myConfig = new main.Config("/test/config_test6.js");
main.StartWithConfig(myConfig, (e,d,n,f)=>{
n[0].on('pushedNotification', function(message, text, data){
console.log("Some Notification happened!");
});
e.addChange(9); //Some change introduced      
});
```

## \_AddInstance

Internal function. Given a factory and an entity name (One of {Environment}, 
{MotionDetector}, {Notifier}, or {Filter}) and arguments adds this instance
to the current context

**Parameters**

-   `f` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** is the factory instance.
-   `p` **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** is an object name to instanciate.
-   `args` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** is an array of arguments for the constructor invoke..

## Config

A generic base class which creates a motion detector for surrounding environments \\n
Collaborator: Environment

**Parameters**

-   `profile` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** is the path of the config file to use
-   `prepend_cwd` **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** tells if the config class should prepend CWD to the profile path or not (optional, default `true`)
-   `forceAdds` **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** if true means that all Entities in config should be added forcibly independent of being of the correct type. (optional, default `false`)

**Examples**

```javascript
let alternativeConfig = new main.Config("config_test1.js");
```

Returns **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** the config object itself

### mapToFile

TODO:

**Parameters**

-   `file_name`  
-   `prepend_cwd`   (optional, default `true`)

### isFallback

TODO:

### profile

TODO:

**Parameters**

-   `name`  

### getProperty

TODO:

**Parameters**

-   `profile_name`  
-   `prop`  

Returns **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the

### slackHook

Direct assessor to the slackHook ({SlackMotionDetector}), if that exists on the config file

**Parameters**

-   `profile_name` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** , the name of the profile to lookup into (default is "default")

Returns **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the slackhook string

### slackAuth

Direct assessor to the slackAuth ({SlackMotionDetector}), if that exists on the config file

**Parameters**

-   `profile_name` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** , the name of the profile to lookup into (default is "default")

Returns **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** profile_name, the slackhook string

### raspistillOptions

TODO:

**Parameters**

-   `profile_name`  

### toString

Returns the string path of the Config file the current object points to.

Returns **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the string representation, in this case the file record pointing to

## SaveAllToConfig

Saves all the Environment, Detector, Notifiers and Filters information into a config file

**Parameters**

-   `src` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** is the path of the config file to use
-   `callback` **[Function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function)** is the callback function to call once the Save is all done, it passes
    status and message as arguments to the function: \\m
    status = 0: Successfully has performed the action.
    status = 1: Error: File exists already.
-   `force` **[Boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** true if the user wants to overwrite an already existing file. (optional, default `false`)

## \_InternalSerializeCurrentContext

Internal function which serializes the current Context into the format matching the "profile" object 
of the config file.

Returns **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** Returns a "profile" object in JSON.stringify format

## AddPlugin

Adds an Extention plugin to the library

**Parameters**

-   `ext_module` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** is the actual module we are extending.

Returns **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** True the plugin was successfully added.

## RemovePlugin

Removes an existing Extention plugin from the library

**Parameters**

-   `ext_module_id` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** is the id of the module to remove.

Returns **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** True the plugin was successfully removed.

## GetPlugins

Gets the existing extension plugins added to the library

Returns **[object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** the plugins object;

## Entities

Exposes the Entities accessible

## Extensions

Exposes the Extensions accessible

## Filters

Exposes the Filters accessible
